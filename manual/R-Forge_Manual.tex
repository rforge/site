\documentclass[a4paper]{report}

% PREAMBLE
%\usepackage[austrian]{babel}
%\usepackage[utf8]{inputenc}
\usepackage[authoryear,round]{natbib}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{url}
\sloppy

%% Authornames: R-Forge Team, R-Forge Administration Team, R-Forge
%% Support Team, R-Forge Maintenance Team, synonym for team -> crew
\newcommand{\RFORGE}{R-Forge Administration and Development Team}

\title{R-Forge User's Manual, BETA}
\author{\RFORGE}
%\email{R-Forge@R-project.org}
%\institute{Department of Statistics and Mathematics\newline
%Vienna University of Economics and Business Administration}
\date{\today}

\let\code=\texttt
\let\email=\texttt
\newcommand{\pkg}[1]{{\normalfont\fontseries{b}\selectfont #1}}
\newcommand{\proglang}[1]{\textsf{#1}}
\newcommand{\class}[1]{`\code{#1}'}

\begin{document}

\pagestyle{empty}

%%\maketitle

\begin{titlepage}

  {\LARGE \raggedleft \textbf{R-Forge User's Manual, BETA}}\\
%%  \vspace*{0.5cm}
  \begin{flushright}
  \textbf{SVN Revision: xxxx, \today}\\
  \end{flushright}

  \vspace*{\fill}
%%  \vspace*{10cm}  
  {\Large \raggedleft \textbf{\RFORGE{}}}
  
\end{titlepage}




\newpage
\vspace*{\fill}

%% Copyright notices
Copyright 2006--2007 Stefan Theussl\\
Copyright 2008 \RFORGE{}\\

Permission is granted to make and distribute verbatim copies of this
manual provided the copyright notice and this permission notice are
preserved on all copies.

Permission is granted to copy and distribute modified versions of this
manual under the conditions for verbatim copying, provided that the
entire resulting derived work is distributed under the terms of a
permission notice identical to this one. 

Permission is granted to copy and distribute translations of this
manual into another language, under the above conditions for modified
versions, except that this permission notice may be stated in a
translation approved by the \RFORGE{}. 

The \RFORGE{} consists of the
following members:

\begin{itemize}
\item Kurt Hornik  
\item Martin Kober 
\item David Meyer 
\item Stefan Theu\ss{}l
\item Achim Zeileis
\end{itemize}

\newpage

\pagenumbering{roman}
\pagestyle{plain}
\tableofcontents

\clearpage
\pagestyle{headings}
\pagenumbering{arabic}
\setcounter{page}{1}

\section{Introduction}
\label{sec:intro}

For a decade the \proglang{R} Development Core Team is using collaborative
development tools like Subversion~\citep[SVN,
see][]{forge:Pilato+Collins-Sussman+Fitzpatrick:2004} or Concurrent
Versions System~\citep[CVS, see][]{forge:Cederqvist:2006} provided by
ETH Z\"urich.   
Many \proglang{R} package
developers around the world use similar infrastructure built upon their own
solutions as collaborative development is a key factor for a lot of
successfull open source projects. Therefore the \textbf{R-project}
wants to provide infrastructure not only
for the \proglang{R} Development Core Team but also for the entire
\proglang{R} community. 

\textbf{R-Forge} (\url{http://R-Forge.R-project.org}) is a
framework based on 
\textbf{GForge} \citep{forge:copeland_et_al:2006} which integrates
various tools like 
SVN for collaborative work on source code, mailing lists, bug tracking
etc. into one platform. It is a
place where all \proglang{R} developers and users can come together and exchange
their knowledge. Joining this community service gives you access to
all we have to offer.

The advantage of having the new meeting (or coding) 
point is, that your package is going to be built and checked every day
not only with the latest patched and release version but also the
newest devel version of \proglang{R}. You don't have to set up your own
build and check environment. That means you have your devel version of
your package on R-Forge and if you decide to release a new
version on CRAN, this can be done in a standardized way.

Furthermore, all package developers now have a
platform which allows presenting their work on the basis of project
websites or
news anouncements. Mailinglists or forums give developers convenient
instruments for communicating information to users or participating
project members.
With the possibility to categorize your project in the project tree we
try to offer a way of searching packages not only by name but also by
topic. It is clear that these tree can't be complete, so people are
welcome to make suggestions on how we could improve it.
 
In this manual all relevant steps to get
started with \textbf{R-Forge} are described. If you need help or have
comments regarding \textbf{R-Forge} please send an email to
\url{R-Forge@R-project.org}. For more detailed
documentation regarding the underlying \textbf{GForge} system
see~\cite{forge:copeland_et_al:2006}.\newline 
\newline
The main features provided by \textbf{R-Forge} are:
\begin{description}
\item[SCM] means 'Source Code Management' and provides the most
  important feature namely ``SVN''.
\item[Daily package builds] are automatically created and can then be
  downloaded via\newline 
  \code{install.packages("foo", repos = "R-Forge.R-project.org")}.
\end{description}
In addition there are other useful tools available
\begin{itemize}
\item the project tree offers you to assign your project to one or more
  topics (i.e.: finance, biostatistics, regression analysis, \ldots),
\item forums are places to discuss certain topics with package
  developers,
\item mailinglists can be managed by package admins,
\item a bug tracking and feature request system assists in package
  development,
\item news can be put on the front page (after approval of the R-Forge
  admins).
\end{itemize}
Upcoming features:
\begin{itemize}
\item Wiki,
\item task management
\item code snippets,
\item project help board.
\end{itemize}

\section{Registration}
\label{sec:registration}

\subsection{Registering a  New User}

To register a new user, click on the ``New Account'' link on the top
right side of the browser window at \url{http://R-Forge.R-project.org}.
Fill out the form (there are descriptions and hints for each field on
this site) and click on ``Submit'' afterwards. You will receive an
email with
a URL to your specified email address. After clicking on this link
your account has been verified. Now you're able to login to the
website.
\newline

\textbf{Important note:} The tab ``My Page'' is the most important
page on \textbf{R-Forge}. Here you configure your account, you see your
project memberships and see the items, which have been assigned to you
(i.e. bugs, feature requests, etc.).
\newline

Now you can start your own project (see Section~\ref{sec:newproject}
for details) or become a member of an existing project
(Section~\ref{sec:joinproject}). 

\subsection{Joining a Project}
\label{sec:joinproject}
If you like to join an existing project you achieve this by doing the
following steps:
\begin{enumerate}
\item First you need the name of the project you want to become a
  member of. You can ``search'' for the project (top middle side of the
  browser window) or you click on one of the projects showing in the
  ``Project Tree''. The latter is an alphabetically sorted list of all
  \textbf{R-Forge} projects.
\item Then you go to the project summary page (should be the default
  entry point). There is a window on the right side called
  ``Developer Info''. To join this project you need the permission of
  the project admin. So click on ``Request to join'' to send the
  project admin an email.
\item If the project admin decides to add you as developer you will
  receive an email confirming your developer account. Now you have
  full SVN access (see section \ref{sec:scm} for details).
\end{enumerate}

\subsection{Registering a New Project}
\label{sec:newproject}

Registering a new project is easy: Go to the R-Forge website, login and
go to ``My Page'' section. You have a ``Register Project'' link in the
menu at the top of your page. Now fill in the form and submit your
project. After approval of the project by the R-Forge admins  you will
be notified via email and you will be able to start with your project
on R-Forge.

\section{Source Code Management}
\label{sec:scm}

\subsection{How to get SVN to work}
\label{sec:scmhowto}

\textbf{R-Forge} uses
\textbf{Subversion}~(SVN, \url{http://subversion.tigris.org}) for
source code management.
Therefore you need an SVN client (e.g. ``Tortoise SVN'' on
windows machines,~\url{http://tortoisesvn.tigris.org}). For security
reasons we use secure shell (SSH) tunneling for
developer accounts which means that all network traffic is
encrypted. Therefore you have to setup your machine accordingly.

\subsubsection{Windows}

The software mentioned in this section can be found
on\newline
\url{http://www.chiark.greenend.org.uk/~sgtatham/putty/}.
\begin{enumerate}
\item get and install the latest TortoiseSVN client from
  \url{http://tortoisesvn.net/downloads}.
\item then you need to generate an SSH keypair and upload the \textbf{public}
  key to \textbf{R-Forge}:
  \begin{itemize}
  \item Download and execute \texttt{puttygen.exe}.
  \item leave ssh-2 rsa marked and click on ``generate'' (make some
    random movements).
  \item save the private key using the corresponding button (you don't
    need to set a password).
  \item  Mark the text in the text field ``Public key
    for pasting into OpenSSH authorized\_keys file''.
  \item copy and paste it into your shell account information
    configuration: Go to \url{http://R-forge.R-project.org} and
    login. Go to ``My Page'' and then click on ``Account
    maintenance''. At the bottom 
    of this page you click on ``edit keys'' in the ``Shell Account
    Information'' window (\textbf{Important note:} you must be a project admin
    or member of a project to do this, otherwise there won't be an
    option ``Shell Account Information'', see section
    \ref{sec:joinproject} for joining a project or section
    \ref{sec:newproject} for registering a project).
    The key you enter here is typically of the form:
    \begin{verbatim}
    ssh-rsa AAAA... foo@bar
    \end{verbatim}
    The first field
    describes the type of key, the second field is the key itself, and
    the third field is a comment. \textbf{It is important that there are no
      newlines within a key}.
  \end{itemize}
\item Now you have to wait until the next full hour. The keys are
  activated once an hour only.
\item Next you need an authentication agent like \texttt{pageant.exe}. Load
  your \textbf{private} key with \texttt{pageant.exe} (right click on
  the pageant tray icon and then ``add key''.
%%\item Before you do your first checkout you need the host
%%  key information of R-Forge. Therefore you fetch the registry key
%%  from
%%  \url{http://download.r-forge.r-project.org/r-forge-hostname.reg} and
%%  add it to the registry by double clicking on the file.
\item Finally check out the repository using the URL given on the
  project website (tab ``SCM'') under ``developer account'' with
  ``Tortoise SVN'' or some other client. (Note: if this last step
  fails for some reason, wait an hour an try again. The logins are
  created once an hour only)
\end{enumerate}

\subsubsection{Unix}
\label{sec:scm-unix}

\begin{enumerate}
\item First you need a ssh keypair: Generate and save the keys
  using \texttt{ssh-keygen} on the command line or use your existing keypair.  
\item Upload the \textbf{public} key to \textbf{R-Forge} using the webplatform: Go to
  ``My Page'' and then click on ``Account maintenance''. At the bottom
  of this page you click on ``edit keys'' in the ``Shell Account
  Information'' window (\textbf{Important note:} you need to be a project admin
  or member of a project to do this, otherwise there won't be an
  option ``Shell Account Information'', see section
  \ref{sec:joinproject} for joining a project or section
  \ref{sec:newproject} for registering a project).
  The key you enter here is typically of the form:
\begin{verbatim}
ssh-dsa AAAA... foo@bar
\end{verbatim}
  The first field
  describes the type of key, the second field is the key itself, and
  the third field is a comment. \textbf{It is important that there are
    no newlines within a key}.
\item Now you have to wait until the next full hour (the key gets activated).
\item Finally check out the repository using the URL given on the
  project website (tab ``SCM'') under ``developer account'' with
  \texttt{svn checkout}. (Note: if this last step
  fails for some reason, wait an hour and try again. The logins are
  created once an hour only)
\end{enumerate}



\subsubsection{Mac OSX}
\label{sec:scm-macosx}
%% Thanks to Philippe Grosjean for providing us with this description
Mac OS X users should refer to Unix section~\ref{sec:scm-unix}. They
can alternatively use GUI applications to manage their SVN
repositories and SSH keychains.

\begin{enumerate}
\item To manage the ssh keypair you can use SSHKeychain
(http://www.sshkeychain.org/). You can generate your keychains in the
'Preferences...' dialog box of SSHKeychain, but you have to provide a
passphrase of 5 characters minimum. If you do not want a passphrase,
use 'ssh-keygen' at the terminal (a keychain without passphrase is
required to use SCPlugin, see point 4). In SSHKeychain, select 'Agent'
-> 'Add single key...' and select the key you just generated. 

\item Upload the public key to \textbf{R-Forge} as explained in
  section~\ref{sec:scm-unix}
  Unix. The public key is in a file name [keyfile].pub in the same
  directory as your private key. If you used default directory and
  name to generate your key, the files are in a hidden directory named
  '.ssh' in your home path, and is thus not visible in the Finder. To
  make a copy of the public key on your desktop type the following
  commands in the terminal (replace the name of the file with yours): 

  \code{cp ~/.ssh/id\_rsa.pub ~/Desktop/id\_rsa.pub}
  
  Then, upload this file to \textbf{R-Forge}.

\item Wait until the next full hour that the key gets activated.

\item If you want a convenient management of your SVN tree in the
  Finder, install SCPlugin. To install it, follow instructions at
  \url{http://scplugin.tigris.org/installation.html}. Once SCPlugin is
  installed, navigate in the Finder to the directory where you want to
  place the local copy of your SVN tree. Create a folder with the name
  of your project, right click on this folder and select \textit{Subversion}
  -> \textit{Checkout}. Indicate the URL given on the project web-site (tab
  "SCM") under "developer account". (Note: if this last step fails,
  wait an hour and try again. The logins are created once an hour
  only). 

\end{enumerate}

Another page to consult for SVN installation on Mac OS X is
\url{http://www.wikihow.com/Install-Subversion-on-Mac-OS-X}. Alternate SVN
software are proposed there. 

\subsection{R Package Development}

Making developing R packages easy is the main mission of
R-Forge. R-Forge will build and check your packages on multiple
plattforms, including Linux, Windows (32 bit) and Mac OS X. 

To build your packages, simply place your package in the
\textbf{\texttt{pkg/}} directory in your SVM repository (see 
Section~\ref{sec:scmhowto} on how to achieve this) and check it
in. Typically this directory contains the R package with the usual
\texttt{DESCRIPTION} file and \texttt{R/}, \texttt{man/},
\texttt{data/} directories (see \cite{Rcore:writing_R_extensions} for more
details). You can build \textbf{more than one package} by putting the
packages in subdirectories, e.g. \texttt{pkg/myPkgA/}, 
\texttt{pkg/myPkgB/}, etc.

Packages are automatically checked out every night (Central European
Time) and built and checked on several plattforms (make sure that the
\texttt{DESCRIPTION} files are well-formed and contain a proper 
package name, otherwise your package may not get checked out). The R
Packages tab on the project's page gives an overview 
of all the 
packages in the project, including \textbf{check and build logs} for
several 
plattforms. All packages built on R-Forge are made available on the
R-Forge package repository, so packages can be installed simply by
typing \url{install.packages("foo", repos = "R-Forge.R-project.org")}
in R. 

Developers who wish to use their own external package repository can
use the \textbf{external SVN} feature in the R packages Admin tab
(follow the instructions on the site). Please note that only
repositories with anonymus access are supported. It is possible to use
external and internal SVN repositories side-by-side. Regardless of
origin, all packages will show up on the R packages tab. 

Packages can be \textbf{submitted to CRAN} through the web interface
(you have to be project admin to use this). 

\subsection{Additional Features}

\subsubsection{Project Homepage}
Each project on R-Forge has its own homepage with the URL
\url{http://ProjectUnixName.r-forge.r-project.org/}. Use the
pre-defined \textbf{\texttt{www/}} directory in your SVN repository to
create or modify your homepage. Note that it will be checked out
daily, so please take 
into consideration that it will not be available right after you
commit your changes or updates. 
% TODO: What about PHP scripting?


\subsubsection{SCM Options}
Two options can be accessed through the SCM Admin tab:
\begin{enumerate}
\item{Enable anonymus access} Self-explanatory. If disabled, only
  project members can access the SVN repository and  \textbf{packages
    will not be checked out for automatic building}. The project
  homepage will still be available though. 
  % TODO: Fact-check this.

\item{Delivery of Commit Messages} This allows you to direct commit
  messages to an email address of your choice, e.g. the project's
  commit mailing list (see below).  
\end{enumerate}


\subsubsection{Mailing Lists}


\section{Migration from an existing CVS/SVN repository}

Steps to include the complete history of your current repositroy in
your R-Forge project:
\begin{enumerate}
\item Please register a project on R-Forge first.
\item convert from CVS to SVN (For converting from CVS to an SVN
  repository see e.g.,
  \url{http://www.xs4all.nl/~carlo17/svn/cvs2svn.html}).
\item Then dump the whole SVN repository (using \code{svnadmin dump >
    foo.dump}).
\item Verify that the dump file can be loaded into a freshly created
  SVN repository (\code{svnadmin load newrep < foo.dump}). 
\item Send it to us: If the dump file is smaller than 10 MB you can
  send it per email to \email{R-Forge@R-project.org} otherwise you have to
  provide it somewhere for download. 
\item \code{svn move} your package to the /pkg directory
\end{enumerate}


%% Acknowledgements from Rnews article
\section{Acknowledgements}

Setting up this project would not have been possible without Douglas
Bates and the University of Wisconsin as they provided us with a
server for hosting this platform. Furthermore, 
the authors would like to thank the Zentrum f\"ur Informatikdienste  
of the Wirtschaftsuniversit\"at Wien for
their support and for providing us with additional hardware as well as a
professional server infrastructure. 
Thanks to Philippe Grosjean for
providing a Mac OSX description (Section~\ref{sec:scm-macosx}).


\bibliographystyle{plainnat}
\bibliography{R-Forge_Manual}

\end{document}
