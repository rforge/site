\documentclass[a4paper]{article}

% PREAMBLE
%\usepackage[austrian]{babel}
%\usepackage[utf8]{inputenc}
\usepackage[authoryear,round]{natbib}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{url}
\usepackage{a4wide}
\sloppy

%% Authornames: R-Forge Team, R-Forge Administration Team, R-Forge
%% Support Team, R-Forge Maintenance Team, synonym for team -> crew
\newcommand{\RFORGE}{\proglang{R}-Forge Administration and Development Team}

%% new command for R-Forge tabs
\newcommand{\tab}[1]{{\normalfont\textit{#1}}}

\title{\proglang{R}-Forge User's Manual}
\author{\RFORGE}
%\email{R-Forge@R-project.org}
%\institute{Department of Statistics and Mathematics\newline
%Vienna University of Economics and Business Administration}
\date{\today}

\let\code=\texttt
\let\email=\texttt
\newcommand{\pkg}[1]{{\normalfont\fontseries{b}\selectfont #1}}
\newcommand{\proglang}[1]{\textsf{#1}}
\newcommand{\class}[1]{`\code{#1}'}

\begin{document}

\pagestyle{empty}

%%\maketitle

\begin{titlepage}

  {\LARGE \raggedleft \textbf{\proglang{R}-Forge User's Manual}}\\
%%  \vspace*{0.5cm}
  \rule{\linewidth}{1.5mm}
  \begin{flushright}
  \textbf{SVN Revision: 227, \today}\\
  \end{flushright}

  \vspace*{\fill}
%%  \vspace*{10cm} 
   
  {\Large
    \noindent {\textbf{\RFORGE{}}\\
    \rule{\linewidth}{1mm}} 
  }
  
\end{titlepage}


\newpage
\vspace*{\fill}

%% Copyright notices
%%\noindent Copyright 2006--2007 Stefan Theussl\\
\noindent Copyright 2006--2011 \RFORGE{}\\

\vspace{0.5cm}
\includegraphics{CCAL.png} 
\vspace{1cm}

\noindent The content in this manual is licensed
under a Creative Commons Attribution-Share Alike 2.0 license. 

\vspace{0.5cm}
The \RFORGE{} has chosen to apply the Creative
Commons Attribution License (CCAL) to this manual, i.e., that under the CCAL,
the authors retain ownership of the copyright 
for this manual, but the authors allow anyone to download, reuse,
reprint, modify, distribute, and/or copy the contents of this manual,
so long as the original authors and source are 
credited. Furthermore, the authors permit others to distribute
derivative works only under the same license or one compatible with
the one that governs the authors' work. 
This broad license was developed to facilitate open access
to, and free use of, original works of all types. Applying this
standard license to this work will ensure the authors' right to make
this work freely and openly available (see
\url{http://creativecommons.org/licenses/by-sa/2.0/} for details). 

\vspace{0.5cm}
The current members of the \RFORGE{} are Kurt Hornik, David Meyer,
Stefan Theu\ss{}l and Achim Zeileis. Former members include: Martin
Kober. To contact the 
authors please write an email to \email{R-Forge@R-project.org}.

\newpage

\pagenumbering{roman}
\pagestyle{plain}
\tableofcontents

\clearpage
\pagestyle{headings}
\pagenumbering{arabic}
\setcounter{page}{1}

\section{Introduction}
\label{sec:intro}

Software developers typically use collaborative development tools like
Subversion~\citep[SVN,
see][]{forge:Pilato+Collins-Sussman+Fitzpatrick:2004} or Concurrent
Versions System~\citep[CVS, see][]{forge:Cederqvist:2006} in order to
manage their code base efficiently. E.g., the \proglang{R} Development
Core Team is using a central SVN repository provided by ETH Z\"urich
(\url{http://svn.R-project.org}) for the base \proglang{R}
distribution. What is more, many \proglang{R} package developers
around the world use similar infrastructure built upon their own
solutions since collaborative development is a key factor for open
source projects being successful. Thus, the \textbf{R-project} aims to
provide infrastructure in order to facilitate such an open
decentralized development process for the entire \proglang{R}
community.

\proglang{R}-Forge~\citep[][]{RJournal:Theussl+Zeileis:2009} provides
a set of tools for source code management and various web-based
features. It aims to provide a platform for collaborative development
of \proglang{R}~packages, \proglang{R}-related software or further
projects. It is closely related to the most famous of such
platforms---the world's largest open source software (OSS) development
website---namely \url{http://SourceForge.net}. What is different is
the provided set of tools with a strong focus on the need of the
\proglang{R} community. All in all, \proglang{R}-Forge is a place
where all \proglang{R} developers and users can come together and
exchange their knowledge. Joining this community service gives you
access to all we have to offer.

Basically, \proglang{R}-Forge is based on FusionForge
(\url{http://fusionforge.org/})---the open source successor of
GForge~\citep{forge:copeland_et_al:2006}---which is a framework
integrating various tools like SVN for collaborative work on source
code, mailing lists, bug tracking etc.\ into one platform. On
\proglang{R}-Forge all work is organized in the same entity, namely a
``Project''. In these projects it is possible to host one or more
packages and other \proglang{R}-related material. The main advantage
is, that uploaded code is going to be packaged (i.e., built) and
checked every day for various platforms not only with the latest
patched version of \proglang{R}~\citep[see \textit{What is the current
  version of \proglang{R}?} in][]{forge:hornik:2010} but also with the
release candidate just before a new version of \proglang{R} is to be
released. Furthermore, packages passing the quality management system
can be released from \proglang{R}-Forge to CRAN in a standardized way.

Additionally, \proglang{R}-Forge provides other tools to coordinate
the work between project members and to communicate with their user
base.

\begin{itemize}
\item Project websites are a way for developers to present their work
  on a subdomain of \proglang{R}-Forge (E.g.,
  \url{http://foo.R-forge.R-project.org}). It is also possible to
  offer a link to another website on the project summary page instead. 
\item Mailing lists: By default one is automatically created when setting up a
  project. Additional mailing lists can be set up easily as well. 
\item Projects can be categorized into different
  topics (e.g., biostatistics, finance, regression analysis,
  \ldots). This enables other people to quickly find what they are
  looking for. People can browse the categories in the so-called
  ``Project Tree'' tab. In the default setting the project tree lists
  alphabetically all projects including a short description similar to
  CRAN. It is clear that this tree cannot be complete, so people are
  welcome to make suggestions on how we could improve it. 
\item Forums can be set up separately by the project
  administrators.%% are places to discuss certain topics 
\item News can be submitted to the project summary page as well as to the
  front page. The latter needs approval by one of the \RFORGE{}
  members. It is also possible to download them as RSS feeds.
\end{itemize} 

%%Upcoming features:
%%\begin{itemize}
%%\item Wiki,
%%\item task management
%%\item code snippets,
%%\item project help board.
%%\end{itemize}

In this manual we present all relevant steps to get started with
\proglang{R}-Forge. If you need further help or like to submit
comments regarding \proglang{R}-Forge please send an email to
\email{R-Forge@R-project.org}. For a more detailed documentation
regarding the underlying FusionForge system we refer to
\url{https://fusionforge.org/docman/view.php/6/1/gforge_manual.plain.html}.

\section{Registration}
\label{sec:registration}

\subsection{Registering a  New User}

To register a new user, click on the ``New Account'' link on the top
right side of the browser window at \url{http://R-Forge.R-project.org}.
Fill out the form (there are descriptions and hints for each field on
this site) and click on ``Submit'' afterwards. You will receive an
email with
a URL to your specified email address. After clicking on this link
your account has been verified. Now you're able to login to the
website.
\newline

\textbf{Important note:} The tab ``My Page'' is the most important
page on \proglang{R}-Forge. Here you configure your account, you see your
project memberships and see the items, which have been assigned to you
(i.e. bugs, feature requests, etc.).
\newline

Now you can start your own project (see Section~\ref{sec:newproject}
for details) or become a member of an existing project
(Section~\ref{sec:joinproject}). 

\subsection{Joining a Project}
\label{sec:joinproject}
If you like to join an existing project you achieve this by doing the
following steps:
\begin{enumerate}
\item First you need the name of the project you want to become a
  member of. You can ``search'' for the project (top middle side of the
  browser window) or you click on one of the projects showing in the
  ``Project Tree''. The latter is an alphabetically sorted list of all
  \proglang{R}-Forge projects.
\item Then you go to the project summary page (should be the default
  entry point). There is a window on the right side called
  ``Developer Info''. To join this project you need the permission of
  the project admin. So click on ``Request to join'' to send the
  project admin an email.
\item If the project admin decides to add you as developer you will
  receive an email confirming your developer account. Now you have
  full SVN access (see section \ref{sec:scm} for details).
\end{enumerate}

\subsection{Registering a New Project}
\label{sec:newproject}

Registering a new project is easy: Go to the \proglang{R}-Forge website, login and
go to ``My Page'' section. You have a ``Register Project'' link in the
menu at the top of your page. Now fill in the form and submit your
project. After approval of the project by the \proglang{R}-Forge admins  you will
be notified via email and you will be able to start with your project
on \proglang{R}-Forge.

\section{Source Code Management}
\label{sec:scm}

\subsection{Introduction}

When carrying out software projects, source files change over time,
new files get created and old files deleted. Typically, several authors
work on several computers on the same and/or different files and keeping
track of every change can become a tedious task. In the open source
community, the general solution to this problem is to use version
control, typically provided by the majority of SCM tools. For this
reason \proglang{R}-Forge utilizes SVN to facilitate the developer's
work when creating software.

A central repository ensures that the developer
has always access to the current version of the project's source
code. Any of the authorized collaborators can ``checkout''
(i.e. download) or ``update'' the project
file structure, make the necessary changes or additions, delete
files from the current revision and finally ``commit'' changes or
additions to the repository. More than
that, SVN keeps track of the complete history of the project file
structure. At any point in the development stage it is possible to go
back to any stage in the history as well as to inspect and restore old
files. This is called version control as every stage automatically is
assigned a unique version number which increases over time. 

%% SCM on \proglang{R}-Forge
On \proglang{R}-Forge such a version-controlled repository is automatically
created for each project. To get started, the project members just
have to install the client of their choice (e.g., Tortoise SVN on
Windows or svnX on 
Mac OSX) and check out the repository. In addition to the inherent
backup of every version within the repository a backup of the whole
repository is generated daily. 

%% Rights management on\proglang{R}-Forge
A rights management system assures that, by default, anonymous users
have read access and developers have write access to the data associated with 
a certain project on \proglang{R}-Forge. More precisely, registered users can
be granted one of several roles: e.g., the ``Administrator'' has
all rights including the right to 
add new users to the project or release packages directly to CRAN.
He/she is usually the package 
maintainer, the project leader or has registered the project originally.
Other members of a project typically have either the role ``Senior 
Developer'' or ``Junior Developer'' which both have permission to
commit to the project SVN repository and examine the log files in the 
\tab{R Packages} tab. The differences between those
roles are subtle, e.g., senior developers additionally have administrative
privileges in several places in the project.  
When we speak of developers in subsequent sections we refer to project
members having the rights at least of a junior developer.

%% Note: the following section is referred to by the Rnews article as
%% 3.2

\subsection{How to Get SVN to Work}
\label{sec:scmhowto}

\proglang{R}-Forge uses \textbf{Subversion}~(SVN,
\url{http://subversion.tigris.org}) for source code management.
You need an SVN client (e.g. ``Tortoise SVN'' on
Windows machines,~\url{http://tortoisesvn.tigris.org}) to take full
advantage of your SVN repository. For security
reasons we use secure shell (SSH) tunneling for
developer accounts which means that all network traffic is
encrypted. This means that you have to setup your machine
accordingly.

\subsubsection{Windows}

The software mentioned in this section can be found
on\newline
\url{http://www.chiark.greenend.org.uk/~sgtatham/putty/}.
\begin{enumerate}
\item get and install the latest TortoiseSVN client from
  \url{http://tortoisesvn.net/downloads}. Note: Windows Vista users
  have to take care that they choose the right installation package
  for their architecture (i.e., Windows Vista 64-bit users have to
  download the 64-bit installer).
\item it is sufficient to use password authentication to write to the
  project repository (if you decided to do so please go to
  step~5). But for convenience purposes (avoiding password 
  queries) it is probably better to
  generate an SSH keypair and upload the \textbf{public} 
  key to \proglang{R}-Forge:
  \begin{itemize}
  \item Download and execute \texttt{puttygen.exe}.
  \item leave ssh-2 rsa marked and click on ``generate'' (make some
    random movements).
  \item save the private key using the corresponding button (you don't
    need to set a password).
  \item  Mark the text in the text field ``Public key
    for pasting into OpenSSH authorized\_keys file''.
  \item copy and paste it into your shell account information
    configuration: Go to \url{http://R-forge.R-project.org} and
    login. Go to ``My Page'' and then click on ``Account
    maintenance''. At the bottom 
    of this page you click on ``edit keys'' in the ``Shell Account
    Information'' window (\textbf{Important note:} you must be a project admin
    or member of a project to do this, otherwise there won't be an
    option ``Shell Account Information'', see section
    \ref{sec:joinproject} for joining a project or section
    \ref{sec:newproject} for registering a project).
    The key you enter here is typically of the form:
    \begin{verbatim}
    ssh-rsa AAAA... foo@bar
    \end{verbatim}
    The first field
    describes the type of key, the second field is the key itself, and
    the third field is a comment. \textbf{It is important that there are no
      newlines within a key}.
  \end{itemize}
\item Now you have to wait until the next full hour. The keys are
  activated once an hour only.
\item Next you need an authentication agent like \texttt{pageant.exe}. Load
  your \textbf{private} key with \texttt{pageant.exe} (right click on
  the pageant tray icon and then ``add key''.
%%\item Before you do your first checkout you need the host
%%  key information of \proglang{R}-Forge. Therefore you fetch the registry key
%%  from
%%  \url{http://download.r-forge.r-project.org/r-forge-hostname.reg} and
%%  add it to the registry by double clicking on the file.
\item Finally check out the repository using the URL given on the
  project website (tab ``SCM'') under ``developer account'' with
  ``Tortoise SVN'' or the SVN~client of your choice. (Note: if this last step
  fails for some reason, wait an hour an try again. The logins are
  created only once an hour only)
\end{enumerate}

\subsubsection{Linux/Unix}
\label{sec:scm-unix}

\begin{enumerate}
\item It is sufficient to use password authentication to write to the
  project repository (if you decided to do so please go to
  step~4). But for convenience purposes (avoiding password 
  queries) it is probably better to upload an SSH keypair: Generate
  and save the keys 
  using \texttt{ssh-keygen} on the command line or use your existing keypair.  
\item Upload the \textbf{public} key to \proglang{R}-Forge using the following
  website: Go to 
  ``My Page'' and then click on ``Account maintenance''. At the bottom
  of this page you click on ``edit keys'' in the ``Shell Account
  Information'' window (\textbf{Important note:} you need to be a project admin
  or member of a project to do this, otherwise there won't be an
  option ``Shell Account Information'', see section
  \ref{sec:joinproject} for joining a project or section
  \ref{sec:newproject} for registering a project).
  The key you enter here is typically of the form:
\begin{verbatim}
ssh-dsa AAAA... foo@bar
\end{verbatim}
  The first field
  describes the type of key, the second field is the key itself, and
  the third field is a comment. \textbf{It is important that there are
    no newlines within a key}.
\item Now you have to wait until the next full hour (the key gets activated).
\item Finally check out the repository using the URL given on the
  project website (tab ``SCM'') under ``developer account'' using
  \texttt{svn checkout}. (Note: if this last step
  fails for some reason, wait an hour and try again. The logins are
  created once an hour only)
\end{enumerate}



\subsubsection{Mac OS X}
\label{sec:scm-macosx}
%% Thanks to Philippe Grosjean for providing us with this description
Mac~OS~X users should consult Section~\ref{sec:scm-unix} (Linux/Unix)
for generating and uploading keypairs. However, alternativ
GUI~applications may be used to manage SVN repositories which is
described here.

\begin{enumerate}
\item Create a keypair and upload the public key to \proglang{R}-Forge
  as explained in Section~\ref{sec:scm-unix}.

\item Wait until the next full hour so that the key gets activated.

\item In order to manage your SVN~repository in the \textit{Finder},
  install \textbf{SCPlugin}. To install it follow the instructions at
  \url{http://scplugin.tigris.org}. Once SCPlugin is installed,
  navigate in the Finder to the directory where you want to place the
  local copy of your SVN~repository. Create a folder with the name of
  your project, right click on this folder and select
  \textit{Subversion} -> \textit{Checkout}. Indicate the URL given on
  the project website (tab "SCM") under \textit{Developer Subversion
    Access via SSH}.
\item Alternatively, download and install the \textbf{svnX} client
  from
  \url{http://www.apple.com/downloads/macosx/development_tools/svnx.html}.
  It has a reasonable GUI, provides parallel views into Subversion
  repositories and working directories, supports all SVN-like
  operations, and can also handle keypairs with password. More
  information for svnX installation on Mac~OS~X is given on the page
  \url{http://www.wikihow.com/Install-Subversion-on-Mac-OS-X}.
\end{enumerate}

\section{\proglang{R} Package Development}

\proglang{R}-Forge aims to provide a platform for collaborative development of
\proglang{R}~packages, \proglang{R}-related software or further
projects. Especially providing good infrastructure for the development of
\proglang{R}~packages is a main mission of the \RFORGE{}. Packages
committed to the SVN repositories are built and checked on multiple
platforms, including Linux, Windows (32 bit) and Mac~OS. 

\subsection{Building and Checking}
To build your packages, simply place your package or, alternatively,
multiple packages in the \textbf{\texttt{pkg/}} directory in your SVN
repository (see Section~\ref{sec:scmhowto} on how to achieve this) and
check it in. Typically this directory contains either the \proglang{R}
package with the usual \texttt{DESCRIPTION} file and \texttt{R/},
\texttt{man/}, \texttt{data/} directories~\citep[see][for more
details]{Rcore:writing_R_extensions} or contains two or more
directories containing the actual package sources, i.e., you can build
\textbf{more than one package} by putting the packages in
subdirectories, e.g. \texttt{pkg/foo/}, \texttt{pkg/bar/}, etc. Note
however, that anonymous access to the source code repository has to
be enabled for the above to work (see Section~\ref{sec:scmoptions}).

Packages are automatically checked out every night (Central European
Time), built and checked on several platforms (make sure that the
\texttt{DESCRIPTION} files are well-formed and contain a proper 
package name, otherwise your package may not get checked out). All
packages successfully checked out appear on the project home page in
the \proglang{R} packages tab. Project members also have access to the
\textbf{check and build logs} on all supported platforms.  

Furthermore, these packages are made available in a CRAN-style
repository---the
\proglang{R}-Forge package repository. This allows packages to be installed simply by
typing \texttt{install.packages("foo", repos = "http://R-Forge.R-project.org")}
on the \proglang{R} command prompt. 

To install dependencies from other repositories as well use e.g.,
\code{install.packages("mypackage", repos = c("http://R-Forge.R-project.org",
"http://your.nearest.CRAN.mirror.org"), dep = TRUE)}

\subsection{External SVNs}
Developers who wish to use their own external package repository can
use the \textbf{external SVN} feature in the \proglang{R}~packages
Admin~tab (follow the instructions on the site). Please note that only
repositories with anonymous access and using the \proglang{R}-Forge
repository structure (i.e., \texttt{pkg} is available in the
repositories) are supported. It is possible to use external and
internal SVN repositories side-by-side. Regardless of origin, all
packages will show up on the \proglang{R} packages tab.

If you decided to migrate your repository to \proglang{R}-Forge please go to
Section~\ref{sec:svnmigration}.

\subsection{Submit Packages to CRAN}
Packages can be \textbf{submitted easily to CRAN} through the web interface.
Note that you have to be project Administrator which indicates maintainership
of the package to achieve this. 


\section{Additional Features}

\subsection{Project Homepage}
Each project on \proglang{R}-Forge has its own homepage with the URL
\url{http://foo.r-forge.r-project.org/} where \texttt{foo} is the
project's Unix name. Use the
pre-defined \textbf{\texttt{www}} directory in your SVN repository to
create or modify your homepage. Note that it will be checked out
daily, so please take into consideration that it will not be available
right after you commit your changes or updates. Please also note that
only html or xhtml will be allowed in the future.
% TODO: What about PHP scripting?


\subsection{SCM Options}
\label{sec:scmoptions}
Two options can be accessed through the SCM Admin tab:
\begin{enumerate}
\item{Enable anonymous access} Self-explanatory. If disabled, only
  project members can access the SVN repository and  \textbf{packages
    will not be checked out for automatic building}. The project
  homepage will still be available though. Default is enabled.
  % TODO: Fact-check this.

\item{Delivery of Commit Messages} This allows you to direct commit
  messages to an email address of your choice, e.g. the project's
  commit mailing list (see below). Default is disabled.
\end{enumerate}


\subsection{Mailing Lists}
\proglang{R}-Forge provides a mailing list service for all projects accessible
through the Lists tab.  

A list named \texttt{foo-commits} where \texttt{foo} is the
project's unix name is already created with each project and can be
used for distributing commit messages (see
Section~\ref{sec:scmoptions}  on how to enable
this feature). Project administrators can create and manage additional
lists for their project.  

Furthermore, \textbf{searching the lists} is provided by the Swish-e engine
and can be accessed via the List tab. Please note that private lists
are not included in the search index. 
% TODO: Reference for swish


%% The following Section is referred ta aas Section 6 in the Rnews article
\section{Migration from an Existing CVS/SVN Repository}
\label{sec:svnmigration}

Steps to include the complete history of your current repository in
your \proglang{R}-Forge project:

\begin{enumerate}
\item Register a project on \proglang{R}-Forge first.
\item If you use CVS please convert from CVS to SVN (see e.g.,
  \url{http://www.xs4all.nl/~carlo17/svn/cvs2svn.html} on how to do
  this).
\item Then dump the whole SVN repository (using \code{svnadmin dump >
    foo.dump}).
\item Verify that the dump file can be loaded into a freshly created
  SVN repository (\code{svnadmin load newrep < foo.dump}). 
\item Send it to us: If the dump file is smaller than 10 MB you can
  send it via email to \email{R-Forge@R-project.org} otherwise you have to
  provide it somewhere for download. 
\item The last step includes to \code{svn move} your package
  to the /pkg directory if this has not been done automatically.
\end{enumerate}


%% TODO:
%%If the source code of a package (e.g., \pkg{foo}) is in a subdirectory
%%of an existing SVN repository add to step~3 the following procedure to
%%filter out the desired parts:
%%
%%\begin{enumerate}
%%\item first dump original repository 'repo' to e.g., repo.dump
%%
%%\item then use svndumpfilter to extract a certain directory recursively\\
%%  \code{cat repo.dump | svndumpfilter include 'path/to/foo'
%%    --drop-empty-revs --renumber-revs  > foo_repo.dump} 
%%
%%\item create temporary repository e.g. 'foo_tmp' and load 'foo_repo.dump' into it\\
%%  \code{cat foo_repo.dump | svnadmin load foo_tmp}
%%
%%\item check out temporary repository\\
%%  \code{svn co file:///path/to/foo_tmp foo_temp_co}
%%
%%\item add missing directories to foo_temp\\
%%  \code{cd foo_temp_co}\\
%%  \code{mkdir -p path/to/foo  ## path to 'foo' in original repository 'repo'}\\
%%  \code{svn add path/}\\
%%  \code{svn ci -m "transition revision"}
%%
%%\item dump extracted svn rep and send it to \email{R-Forge@R-project.org}\\
%%\code{svnadmin dump /path/to/foo_tmp > foo.dump}
%% END TODO


%% Acknowledgements from Rnews article
\section{Acknowledgements}

Setting up this project would not have been possible without Douglas
Bates and the University of Wisconsin as they provided us with a
server for hosting this platform. Furthermore, the authors would like
to thank IT Services of the WU Wirtschaftsuniversit\"at Wien for their
support and for providing us with additional hardware as well as a
professional server infrastructure.  Thanks to Philippe Grosjean and
Hans Werner Borchers for comments on using SVN on Mac~OS~X
(Section~\ref{sec:scm-macosx}).


\bibliographystyle{plainnat}
\bibliography{R-Forge_Manual}

\end{document}
